{"version":3,"file":"index-gJwbkHHK.js","sources":["../../src/components/Loader.jsx","../../src/components/ImageGallery.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["import React from 'react'\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-white flex items-center justify-center z-50\">\r\n      <p className=\"text-xl\">Loading images, please wait...</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loader\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport Loader from './Loader';\r\n\r\nconst PIXABAY_API_KEY = '11263184-2511e204268bc5cc29e1c41a8';\r\nconst PIXABAY_BASE_URL = 'https://pixabay.com/api/';\r\n\r\nconst ImageGallery = () => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [images, setImages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [totalHits, setTotalHits] = useState(0);\r\n  const [currentQuery, setCurrentQuery] = useState('');\r\n  const [showLoadMore, setShowLoadMore] = useState(false);\r\n\r\n  const galleryRef = useRef(null);\r\n  const lightboxRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const initLightbox = () => {\r\n      try {\r\n        if (lightboxRef.current) {\r\n          lightboxRef.current.destroy();\r\n          lightboxRef.current = null;\r\n        }\r\n\r\n        const galleryElements = document.querySelectorAll('.gallery a');\r\n        if (galleryElements.length === 0) {\r\n          return;\r\n        }\r\n\r\n        const lightbox = new SimpleLightbox('.gallery a', {\r\n          captionsData: 'data-caption',\r\n          captionDelay: 250,\r\n          showCounter: true,\r\n          enableKeyboard: true,\r\n          docClose: true,\r\n          animationSpeed: 250,\r\n          preloading: true,\r\n          widthRatio: 0.8,\r\n          heightRatio: 0.8,\r\n          scaleImageToRatio: true,\r\n          disableRightClick: true,\r\n          closeOnOverlayClick: true,\r\n          loop: true\r\n        });\r\n\r\n        lightboxRef.current = lightbox;\r\n      } catch (error) {\r\n        console.error('SimpleLightbox initialization error:', error);\r\n      }\r\n    };\r\n\r\n    if (images.length > 0) {\r\n      const timer = setTimeout(initLightbox, 300);\r\n      return () => clearTimeout(timer);\r\n    }\r\n\r\n    return () => {\r\n      try {\r\n        if (lightboxRef.current) {\r\n          lightboxRef.current.destroy();\r\n          lightboxRef.current = null;\r\n        }\r\n      } catch (error) {\r\n        console.error('SimpleLightbox cleanup error:', error);\r\n      }\r\n    };\r\n  }, [images]);\r\n\r\n  const handleImageClick = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const scrollToNextPage = () => {\r\n    const { height: cardHeight } = document\r\n      .querySelector(\".gallery\")\r\n      .firstElementChild.getBoundingClientRect();\r\n\r\n    window.scrollBy({\r\n      top: cardHeight * 2,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  const loadImages = async (query, pageNum) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.get(PIXABAY_BASE_URL, {\r\n        params: {\r\n          key: PIXABAY_API_KEY,\r\n          q: query,\r\n          image_type: 'photo',\r\n          orientation: 'horizontal',\r\n          safesearch: true,\r\n          per_page: 40,\r\n          page: pageNum\r\n        }\r\n      });\r\n\r\n      const { hits, totalHits: total } = response.data;\r\n\r\n      if (pageNum === 1) {\r\n        setImages(hits);\r\n        setTotalHits(total);\r\n      } else {\r\n        setImages(prevImages => {\r\n          const existingIds = new Set(prevImages.map(img => img.id));\r\n          const newImages = hits.filter(img => !existingIds.has(img.id));\r\n          return [...prevImages, ...newImages];\r\n        });\r\n      }\r\n\r\n      const totalLoadedImages = (pageNum === 1 ? hits.length : images.length + hits.length);\r\n      setShowLoadMore(totalLoadedImages < total);\r\n\r\n      if (lightboxRef.current && document.querySelectorAll('.gallery a').length > 0) {\r\n        const timer = setTimeout(() => {\r\n          try {\r\n            lightboxRef.current.refresh();\r\n          } catch (error) {\r\n            console.error('SimpleLightbox refresh error:', error);\r\n          }\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n      }\r\n\r\n      if (pageNum > 1 && hits.length > 0) {\r\n        const timer = setTimeout(scrollToNextPage, 300);\r\n        return () => clearTimeout(timer);\r\n      }\r\n\r\n    } catch (error) {\r\n      iziToast.error({\r\n        title: 'Error',\r\n        message: 'An error occurred while fetching images. Please try again.',\r\n        position: 'topRight'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const query = searchQuery.trim();\r\n\r\n    if (!query) {\r\n      iziToast.warning({\r\n        title: 'Warning',\r\n        message: 'Please enter a search term',\r\n        position: 'topRight'\r\n      });\r\n      return;\r\n    }\r\n\r\n    setPage(1);\r\n    setCurrentQuery(query);\r\n    await loadImages(query, 1);\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const handleLoadMore = async () => {\r\n    const nextPage = page + 1;\r\n    setPage(nextPage);\r\n    await loadImages(currentQuery, nextPage);\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full px-4\">\r\n      <form onSubmit={handleSubmit} className=\"mb-8 pt-8\">\r\n        <div className=\"flex gap-2 justify-center\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"searchQuery\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            placeholder=\"Search images...\"\r\n            className=\"p-2 border border-gray-300 rounded\"\r\n            required\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"px-6 py-2 bg-blue-500 text-white rounded\"\r\n          >\r\n            Search\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      <div ref={galleryRef} className=\"gallery grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\r\n        {images.map((image) => (\r\n          <div key={image.id} className=\"border-2 border-black rounded-lg bg-white overflow-hidden flex flex-col\">\r\n            <a\r\n              href={image.largeImageURL}\r\n              data-caption={image.tags}\r\n              className=\"block flex-grow gallery-item\"\r\n              onClick={handleImageClick}\r\n            >\r\n              <img\r\n                src={image.webformatURL}\r\n                alt={image.tags}\r\n                className=\"w-full h-full object-cover\"\r\n                loading=\"lazy\"\r\n              />\r\n            </a>\r\n            <div className=\"grid grid-cols-4 text-center text-xs py-3 mt-auto\">\r\n              <div>\r\n                <div className=\"font-bold\">Likes</div>\r\n                <div>{image.likes}</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"font-bold\">Views</div>\r\n                <div>{image.views}</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"font-bold\">Comments</div>\r\n                <div>{image.comments}</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"font-bold\">Downloads</div>\r\n                <div>{image.downloads}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {showLoadMore && !loading && (\r\n        <div className=\"text-center mt-8\">\r\n          <button\r\n            onClick={handleLoadMore}\r\n            className=\"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n          >\r\n            Load more\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {!showLoadMore && images.length > 0 && (\r\n        <p className=\"text-center mt-8 text-gray-600\">\r\n          We're sorry, but you've reached the end of search results\r\n        </p>\r\n      )}\r\n\r\n      {loading && (\r\n        <div className=\"mt-8\">\r\n          <Loader />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from 'react'\r\nimport ImageGallery from './components/ImageGallery'\r\nimport './App.css'\r\n\r\nfunction App() {\r\n  return (\r\n    <ImageGallery />\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n"],"names":["Loader","jsx","PIXABAY_API_KEY","PIXABAY_BASE_URL","ImageGallery","searchQuery","setSearchQuery","useState","images","setImages","loading","setLoading","page","setPage","totalHits","setTotalHits","currentQuery","setCurrentQuery","showLoadMore","setShowLoadMore","galleryRef","useRef","lightboxRef","useEffect","initLightbox","lightbox","SimpleLightbox","error","timer","handleImageClick","e","scrollToNextPage","cardHeight","loadImages","query","pageNum","response","axios","hits","total","prevImages","existingIds","img","newImages","totalLoadedImages","iziToast","handleSubmit","handleLoadMore","nextPage","jsxs","image","App","ReactDOM","React"],"mappings":"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"}